/* apply a natural box layout model to all elements, but allowing components to change
  http://www.paulirish.com/2012/box-sizing-border-box-ftw/ */
html {
  box-sizing: border-box;
}
*, *:before, *:after {
  box-sizing: inherit;
}

html, body {
  height: 100%;
  margin: 0;
  padding: 0;
}
body {
  position: relative;
  font: 14px helvetica, arial;
}
h1, h2 {
  font-weight: normal;
}

.hide {
  display: none;
}


/* -- Layout styles -- */

main {
  height: 100%;
  margin-left: 520px;
}

.sidebar {
  width: 520px;
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  overflow: auto;
  background: #eee;
}


/* -- Modules -- */

.sidebar-container {
  padding: 10px;
  background: #eee;
  width: 100%;
}

#map {
  height: 100%;
}

#title, #video, #status, #details, #alerts, #options {
  position: absolute;
}

/* title module */

#title {
  top: 0;
}
#title h1, #title p {
  margin: 0;
  padding: 0;
}
#title h1 {
  font-size: 2em;
}
#title p {
  font-size: 1.1em;
  line-height: 2;
}

/* video module */

#video {
  top: 70px;
}

/* Hide video note inserted by widget */
div[id^=jwplayer] + p, video + p {
  display: none;
}

/* status module */

#status {
  top: 390px;
}
#status h2 {
  font-size: 1.5em;
  margin: 10px 0 0;
  padding: 0;
}

.expand {
  position: absolute;
  top: 5px;
  left: 490px;
  background: url("images/icons.png") no-repeat 0 -60px / 22px 260px;
  width: 20px;
  height: 20px;
  text-indent: -800px;
  cursor: pointer;
}
.expanded .expand {
  background-position: 0 0;
}

/* details module */

#details {
  top: 450px;
  bottom: 35px;
  overflow-y: auto;
  overflow-x: hidden;
  padding-top: 15px;
  /* force scrollbars to render above background gradients; not sure why this works
    also useful for transitions so that this panel is above the options panel when it slides down */
  z-index: 2;
}
#details table {
  border-collapse: collapse;
  line-height: 1;
  /* clean up scrollbar artifacts in chrome from css width transition
    http://stackoverflow.com/questions/11924986/animating-a-div-with-javascript-renders-artifacts-on-chrome/12023155#12023155 */
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}
#details tr {
  transition: background .2s ease-out;
}
#details tr + tr:hover {
  background: #e4f0f0;
  transition-duration: 0s;
  /*cursor: pointer;*/
}
#details th {
  font-size: 1.2em;
  font-weight: normal;
  border-bottom: 1px solid #bbb;
  text-align: left;
  padding-left: 12px;
}
#details td {
  border-bottom: 1px solid #ddd;
  padding: 12px 2px 12px 12px;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
}
#details th:first-child {
  padding-left: 0;
}
#details td:first-child {
  padding-left: 30px;
  max-width: 270px;
  background: url("images/icons.png") no-repeat 0 0 / 22px 260px;
}

.wirecast {
  opacity: .35;
}
#details .wirecast td:first-child {
  background-position: 2px -231px;
}
#details .desktop td:first-child {
  background-position: 2px -111px;
}
#details .mobile td:first-child {
  background-position: 2px -171px;
}

div[class^=fade] {
  position: fixed;
  width: 510px;
  height: 20px;
  /* set z-index to place gradient above stacking context of semi-transparent table rows */
  z-index: 2;
}
.fade-top {
  top: 430px;
  background: linear-gradient(to bottom, rgba(238,238,238,1) 0%,rgba(238,238,238,0) 100%);
}
.fade-bottom {
  bottom: 35px;
  background: linear-gradient(to top, rgba(238,238,238,1) 0%,rgba(238,238,238,0) 100%);
}


/* alerts module */

#alerts {
  z-index: 3;
  height: 35px;
  bottom: 35px;
  background: #ff9;
  display: none;
}
#alerts p {
  margin: 0;
  line-height: 1;
}
#alerts.error {
  background: #f99;
  color: #fee;
  bottom: 0;
  /* jQuery inserts inline styles, so we need to be sure to override them */
  display: block !important;
}

/* options module */

#options {
  z-index: 1;
  height: 35px;
  bottom: 0;
  background: #ddd;
}
#options input, #options label {
  display: block;
  float: left;
  margin: 0;
}
#options label {
  margin: 0 0 0 5px;
  line-height: 1;
  cursor: pointer;
}


/* -- Expanded table -- */

.showifexpanded {
  display: none;
}
/* note: expanded content is shown via .js b/c it's delayed until css animations are
  complete and display property is not animatable. Using visibility doesn't work either
  b/c content still takes up space and scrollbars are rendered behind the map (in Safari)
  .expanded .showifexpanded {
    display: table-cell;
  } */

.expanded #details td:first-child {
  max-width: 500px;
  transition: max-width 0s linear .25s;
}

.expanded .sidebar,
.expanded [class^=fade] {
  width: 100%;
}
.sidebar,
[class^=fade],
.expanded .sidebar,
.expanded [class^=fade] {
  transition: width .25s cubic-bezier(0.77, 0, 0.175, 1);
}

.leaflet-control {
  opacity: 1;
  transition-delay: .25s;
}
.expanded .leaflet-control {
  opacity: 0;
  transition-delay: 0s;
}

.expanded #details,
.expanded .fade-bottom,
.expanded #alerts {
  bottom: 0;
}
#details, .fade-bottom, #alerts {
  transition: bottom .25s linear;
}


/* -- Popups -- */

.leaflet-popup h1 {
  font-size: 24px;
  line-height: 1;
  margin: 0 0 1em;
  padding-left: 30px;
}
.leaflet-popup td, .leaflet-popup th {
  padding: 1px 0;
  font-size: 1.1em;
}
.leaflet-popup th {
  font-weight: 500;
  padding-right: 8px;
  white-space: nowrap;
}
.leaflet-popup h1 {
  background: url("images/icons.png") no-repeat 0 0 / 22px 260px;
}
h1.desktop {
  background-position: 2px -117px;
}
h1.mobile {
  background-position: 2px -177px;
}
h1.wirecast {
  background-position: 2px -237px;
}
h1.mobile + table .flash, h1.wirecast + table .referrer {
  display: none;
}


/* Override markercluster styles so that all markers are the same color (orange) */

.marker-cluster-small, .marker-cluster-medium, .marker-cluster-large {
  background-color: rgba(232, 188, 140, 0.5);
}
.marker-cluster-small div, .marker-cluster-medium div, .marker-cluster-large div {
  background-color: rgba(255, 165, 0, 0.7);
}
